<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Ventas y Gastos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Modal para mensajes -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle"></div>
            <div class="modal-message" id="modalMessage"></div>
            <button class="modal-btn" id="modalBtn">Aceptar</button>
        </div>
    </div>

    <!-- Página de inicio de sesión -->
    <div id="loginPage" class="login-container">
        <h1 class="login-title">Iniciar Sesión</h1>
        <div class="login-form">
            <div class="form-group">
                <label class="form-label">Nombre de Usuario o Correo</label>
                <input type="text" class="form-input" placeholder="ejemplo_usuario o ejemplo@correo.com" id="loginUsername">
            </div>
            <div class="form-group">
                <label class="form-label">Contraseña</label>
                <input type="password" class="form-input" placeholder="*********" id="loginPassword">
            </div>
            <button class="login-btn" id="loginButton">Entrar</button>
        </div>
        <div class="register-link">
            ¿No tienes cuenta? <a href="#" id="registerLink">Crear cuenta</a>
        </div>
    </div>
    
    <!-- Página de registro de usuario -->
    <div id="registerPage" class="register-container hidden">
        <h1 class="login-title">Crear Cuenta</h1>
        <div class="login-form">
            <div class="form-group">
                <label class="form-label">Nombre Completo</label>
                <input type="text" class="form-input" placeholder="Nombre Apellido" id="regName">
            </div>
            <div class="form-group">
                <label class="form-label">Apellido</label>
                <input type="text" class="form-input" placeholder="Apellido" id="regLastName">
            </div>
            <div class="form-group">
                <label class="form-label">Nombre de Usuario</label>
                <input type="text" class="form-input" placeholder="usuario_123" id="regUsername">
            </div>
            <div class="form-group">
                <label class="form-label">Correo Electrónico</label>
                <input type="email" class="form-input" placeholder="ejemplo@correo.com" id="regEmail">
            </div>
            <div class="form-group">
                <label class="form-label">Contraseña</label>
                <input type="password" class="form-input" placeholder="*********" id="regPassword">
            </div>
            <div class="form-group">
                <label class="form-label">Fecha de Nacimiento</label>
                <input type="date" class="date-input" id="regBirthDate">
            </div>
            <div class="form-group">
                <label class="form-label">Rol</label>
                <div class="role-selector">
                    <div class="role-option active" data-role="Empleado">
                        <i class="fas fa-user-tie"></i> Empleado
                    </div>
                    <div class="role-option" data-role="Administrador">
                        <i class="fas fa-user-shield"></i> Administrador
                    </div>
                </div>
            </div>
            <div class="form-buttons">
                <button class="cancel-btn" id="cancelRegBtn">Cancelar</button>
                <button class="save-btn" id="saveRegBtn">Crear Cuenta</button>
            </div>
        </div>
    </div>
    
    <!-- Aplicación principal (oculta inicialmente) -->
    <div id="appContainer" class="container hidden">
        <header>
            <div class="logo">VentaControl</div>
            <div class="user-menu">
                <div class="user-icon" id="userIcon">U</div>
            </div>
        </header>
        
        <!-- Navegación por pestañas -->
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="home">
                <i class="fas fa-home"></i> Inicio
            </div>
            <div class="nav-tab" data-tab="transaction">
                <i class="fas fa-plus-circle"></i> Registrar
            </div>
            <div class="nav-tab" data-tab="summary">
                <i class="fas fa-chart-bar"></i> Resumen
            </div>
            <div class="nav-tab" data-tab="adjustments">
                <i class="fas fa-cog"></i> Ajustes
            </div>
        </div>
        
        <!-- Página de Inicio -->
        <div id="homePage" class="page">
            <div class="date-section">
                <div class="current-date" id="currentDate">Cargando fecha...</div>
            </div>
            
            <div class="daily-summary">
                <div class="summary-label">Ganancia Hoy</div>
                <div class="summary-amount" id="dailyProfit">$0</div>
                <div class="summary-details">
                    <div>Ventas: <span id="dailySales">$0</span></div>
                    <div>Gastos: <span id="dailyExpenses">$0</span></div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn sale-btn" id="newSaleBtn">
                    <i class="fas fa-cash-register"></i> Registrar Venta
                </button>
                <button class="action-btn expense-btn" id="newExpenseBtn">
                    <i class="fas fa-receipt"></i> Registrar Gasto
                </button>
            </div>
            
            <div class="recent-section">
                <div class="section-title">
                    Últimos Movimientos
                    <button style="font-size: 14px; background: none; border: none; color: #3498db; cursor: pointer;" id="viewAllBtn">Ver todos</button>
                </div>
                <ul class="transactions-list" id="recentTransactions">
                    <!-- Las transacciones se cargarán aquí con JavaScript -->
                </ul>
            </div>
        </div>
        
        <!-- Página de Registro (Venta o Gasto) -->
        <div id="transactionPage" class="page hidden">
            <div class="form-container">
                <div class="form-title" id="formTitle">Registrar Venta</div>
                
                <div class="date-section">
                    <div class="current-date" id="transactionDate">Cargando fecha...</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Monto</label>
                    <input type="number" class="form-input" id="amountInput" placeholder="$ 7.000" min="0" step="100">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Método de Pago</label>
                    <div class="payment-methods">
                        <div class="payment-method active" data-method="Efectivo">
                            <i class="fas fa-money-bill-wave"></i>
                            <div>Efectivo</div>
                        </div>
                        <div class="payment-method" data-method="Transferencia">
                            <i class="fas fa-university"></i>
                            <div>Transferencia</div>
                        </div>
                        <div class="payment-method" data-method="Tarjeta">
                            <i class="fas fa-credit-card"></i>
                            <div>Tarjeta</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descripción</label>
                    <input type="text" class="form-input" id="descriptionInput" placeholder="Ej: Venta de comida rápida">
                </div>
                
                <div class="form-buttons">
                    <button class="cancel-btn" id="cancelTransactionBtn">Cancelar</button>
                    <button class="save-btn" id="saveTransactionBtn">Guardar</button>
                </div>
            </div>
        </div>
        
        <!-- Página de Resumen Semanal -->
        <div id="summaryPage" class="page hidden">
            <div class="date-section">
                <div class="current-date" id="weekRange">Cargando semana...</div>
            </div>
            
            <div class="week-summary">
                <div class="summary-label">Ganancia Semana</div>
                <div class="summary-amount" id="weeklyProfit">$0</div>
                <div class="summary-details">
                    <div>Ventas: <span id="weeklySales">$0</span></div>
                    <div>Gastos: <span id="weeklyExpenses">$0</span></div>
                </div>
            </div>
            
            <div class="recent-section">
                <div class="section-title">Detalle por Día</div>
                <div class="week-days" id="weekDays">
                    <!-- Los días se cargarán dinámicamente -->
                </div>
            </div>
            
            <button class="export-btn" id="exportBtn">
                <i class="fas fa-file-export"></i> Exportar Reporte
            </button>
        </div>
        
        <!-- Página de Ajustes -->
        <div id="adjustmentsPage" class="page hidden">
            <div class="recent-section">
                <div class="section-title">Mi Perfil</div>
                <div id="userProfileInfo" style="padding: 15px; background: #f8f9fa; border-radius: 10px; margin-bottom: 20px;">
                    <!-- Información del usuario se cargará aquí -->
                </div>
            </div>
            
            <div class="recent-section">
                <div class="section-title">Configuración</div>
                <ul class="transactions-list">
                    <li class="transaction-item" style="cursor: pointer;" id="editProfileBtn">
                        <div class="transaction-info">
                            <div class="transaction-icon" style="background-color: #9b59b6;">
                                <i class="fas fa-user-edit"></i>
                            </div>
                            <div>
                                <div class="transaction-name">Editar Perfil</div>
                                <div class="transaction-date">Modificar información personal</div>
                            </div>
                        </div>
                        <div><i class="fas fa-chevron-right" style="color: #ccc;"></i></div>
                    </li>
                    <li class="transaction-item" style="cursor: pointer;" id="manageUsersBtn">
                        <div class="transaction-info">
                            <div class="transaction-icon" style="background-color: #3498db;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div>
                                <div class="transaction-name">Gestionar Usuarios</div>
                                <div class="transaction-date">Administrar cuentas de usuarios</div>
                            </div>
                        </div>
                        <div><i class="fas fa-chevron-right" style="color: #ccc;"></i></div>
                    </li>
                    <li class="transaction-item" style="cursor: pointer;">
                        <div class="transaction-info">
                            <div class="transaction-icon" style="background-color: #2ecc71;">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div>
                                <div class="transaction-name">Reportes Avanzados</div>
                                <div class="transaction-date">Estadísticas detalladas</div>
                            </div>
                        </div>
                        <div><i class="fas fa-chevron-right" style="color: #ccc;"></i></div>
                    </li>
                    <li class="transaction-item" style="cursor: pointer;" id="logoutBtn">
                        <div class="transaction-info">
                            <div class="transaction-icon" style="background-color: #e74c3c;">
                                <i class="fas fa-sign-out-alt"></i>
                            </div>
                            <div>
                                <div class="transaction-name">Cerrar Sesión</div>
                                <div class="transaction-date">Salir de la aplicación</div>
                            </div>
                        </div>
                        <div><i class="fas fa-chevron-right" style="color: #ccc;"></i></div>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Página de gestión de usuarios (solo para administradores) -->
        <div id="usersPage" class="page hidden">
            <div class="recent-section">
                <div class="section-title">
                    Gestión de Usuarios
                    <button style="font-size: 14px; background: #2ecc71; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer;" id="addUserBtn">
                        <i class="fas fa-user-plus"></i> Nuevo Usuario
                    </button>
                </div>
                <div id="usersList">
                    <!-- Lista de usuarios se cargará aquí -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts JavaScript -->
    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/transactions.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>